<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("partials/head") %>
  </head>
  <body data-theme="light">
    <%- include("partials/header") %>
    <main class="container">
      <section class="utils grid">
        <nav aria-label="breadcrumb" class="folderNav">
          <ul>
            <li><a href="/">/</a></li>
            <!-- Iterating over the list of folder names from parent folders to current -->
            <% if (locals.currentFolderArr)
            currentFolderArr.forEach((chunk, index) => { %>
            <li>
              <% if (index === currentFolderArr.length - 1) { %>
                <%= chunk %>
              <% } else { %>
                <a href="/vault/<%= currentFolderArr.slice(0, index + 1).join("/") %>"><%= chunk %></a>
              <% } %>
            </li>
            <% }) %>
          </ul>
        </nav>
        <nav class="addItems">
          <ul>
            <li>
              <button
                data-target="fileUploadModal"
                onclick="toggleModal(event)"
              >
                <%- include("svg/fileUpload.svg") %> File Upload
              </button>
            </li>
            <li>
              <button
                class="contrast"
                data-target="newFolderModal"
                onclick="toggleModal(event)"
              >
                <%- include("svg/createNewFolder.svg") %> Create Folder
              </button>
            </li>
          </ul>
        </nav>
      </section>
      <section class="itemsContainer">
        <% folders.forEach(folder => { %>
        <a
          class="folder outline secondary"
          role="button"
          href="/vault/<%= folder.name %>"
        >
          <%- include("svg/folder.svg") %> <%= folder.name.split("/").at(-1) %>
        </a>
        <% }) %>
      </section>
      <%- include("partials/errors.ejs") %> 
      <%- include("partials/newFolderModal.ejs") %> 
      <%- include("partials/fileUploadModal.ejs") %>
    </main>
  </body>
</html>
